#!/usr/bin/env bash
set -euo pipefail

# Block commits that introduce suspicious hardcoded orbital numbers
if git diff --cached --name-only | grep -E '\.(ts|tsx)$' >/dev/null; then
  if git diff --cached | grep -E 'position\s*:\s*{\s*x:\s*[-0-9.]|velocity\s*:\s*{\s*vx:\s*[-0-9.]' >/dev/null; then
    echo "❌ Possible hardcoded orbital numbers detected. Use Horizons fetch instead."
    exit 1
  fi
fi

echo "✅ pre-commit checks passed."
